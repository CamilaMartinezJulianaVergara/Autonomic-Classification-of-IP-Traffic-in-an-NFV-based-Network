#!/usr/bin/python

from mininet.net import Mininet
from mininet.node import Controller, RemoteController
from mininet.cli import CLI
from mininet.log import setLogLevel, info

def emptyNet():

    NODE1_IP='192.168.0.116'
    CONTROLLER_IP='192.168.0.112'

    net = Mininet( topo=None,
                   build=False)

    net.addController( 'c0',
                      controller=RemoteController,
                      ip=CONTROLLER_IP,
                      port=6633)

     
    h50 = net.addHost('h50', ip='10.0.0.50' )
    h46 = net.addHost('h46', ip='10.0.0.46' )
    h35 = net.addHost('h35', ip='10.0.0.35' )
    h14 = net.addHost('h14', ip='10.0.0.14' )
    h15 = net.addHost('h15', ip='10.0.0.15' )
    h23 = net.addHost('h23', ip='10.0.0.23' )
    h5 = net.addHost('h5', ip='10.0.0.5' )
    h41 = net.addHost('h41', ip='10.0.0.41' )
    h31 = net.addHost('h31', ip='10.0.0.31' )
    h24 = net.addHost('h24', ip='10.0.0.24' )
    h62 = net.addHost('h62', ip='10.0.0.62' )
    h36 = net.addHost('h36', ip='10.0.0.36' )
    h53 = net.addHost('h53', ip='10.0.0.53' )
    h45 = net.addHost('h45', ip='10.0.0.45' )
    h48 = net.addHost('h48', ip='10.0.0.48' )
    h16 = net.addHost('h16', ip='10.0.0.16' )
    h60 = net.addHost('h60', ip='10.0.0.60' )
    h6 = net.addHost('h6', ip='10.0.0.6' )
    h28 = net.addHost('h28', ip='10.0.0.28' )
    h59 = net.addHost('h59', ip='10.0.0.59' )
    h58 = net.addHost('h58', ip='10.0.0.58' )
    h38 = net.addHost('h38', ip='10.0.0.38' )
    h17 = net.addHost('h17', ip='10.0.0.17' )
    h7 = net.addHost('h7', ip='10.0.0.7' )
    h33 = net.addHost('h33', ip='10.0.0.33' )
    h1 = net.addHost('h1', ip='10.0.0.1' )
    h29 = net.addHost('h29', ip='10.0.0.29' )
    h57 = net.addHost('h57', ip='10.0.0.57' )
    h40 = net.addHost('h40', ip='10.0.0.40' )
    h8 = net.addHost('h8', ip='10.0.0.8' )
    h56 = net.addHost('h56', ip='10.0.0.56' )
    h27 = net.addHost('h27', ip='10.0.0.27' )
    h18 = net.addHost('h18', ip='10.0.0.18' )
    h26 = net.addHost('h26', ip='10.0.0.26' )
    h30 = net.addHost('h30', ip='10.0.0.30' )
    h9 = net.addHost('h9', ip='10.0.0.9' )
    h42 = net.addHost('h42', ip='10.0.0.42' )
    h10 = net.addHost('h10', ip='10.0.0.10' )
    h52 = net.addHost('h52', ip='10.0.0.52' )
    h19 = net.addHost('h19', ip='10.0.0.19' )
    h51 = net.addHost('h51', ip='10.0.0.51' )
    h25 = net.addHost('h25', ip='10.0.0.25' )
    h61 = net.addHost('h61', ip='10.0.0.61' )
    h20 = net.addHost('h20', ip='10.0.0.20' )
    h37 = net.addHost('h37', ip='10.0.0.37' )
    h43 = net.addHost('h43', ip='10.0.0.43' )
    h55 = net.addHost('h55', ip='10.0.0.55' )
    h32 = net.addHost('h32', ip='10.0.0.32' )
    h11 = net.addHost('h11', ip='10.0.0.11' )
    h2 = net.addHost('h2', ip='10.0.0.2' )
    h21 = net.addHost('h21', ip='10.0.0.21' )
    h44 = net.addHost('h44', ip='10.0.0.44' )
    h63 = net.addHost('h63', ip='10.0.0.63' )
    h34 = net.addHost('h34', ip='10.0.0.34' )
    h54 = net.addHost('h54', ip='10.0.0.54' )
    h12 = net.addHost('h12', ip='10.0.0.12' )
    h64 = net.addHost('h64', ip='10.0.0.64' )
    h47 = net.addHost('h47', ip='10.0.0.47' )
    h22 = net.addHost('h22', ip='10.0.0.22' )
    h3 = net.addHost('h3', ip='10.0.0.3' )
    h13 = net.addHost('h13', ip='10.0.0.13' )
    h39 = net.addHost('h39', ip='10.0.0.39' )
    h4 = net.addHost('h4', ip='10.0.0.4' )
    h49 = net.addHost('h49', ip='10.0.0.49' )
    s10 = net.addSwitch('s10')
    s4 = net.addSwitch('s4')
    s7 = net.addSwitch('s7')
    s21 = net.addSwitch('s21')
    s1 = net.addSwitch('s1')
    s8 = net.addSwitch('s8')
    s2 = net.addSwitch('s2')
    s11 = net.addSwitch('s11')
    s12 = net.addSwitch('s12')
    s14 = net.addSwitch('s14')
    s5 = net.addSwitch('s5')
    s6 = net.addSwitch('s6')
    s16 = net.addSwitch('s16')
    s13 = net.addSwitch('s13')
    s19 = net.addSwitch('s19')
    s20 = net.addSwitch('s20')
    s9 = net.addSwitch('s9')
    s17 = net.addSwitch('s17')
    s18 = net.addSwitch('s18')
    s3 = net.addSwitch('s3')
    s15 = net.addSwitch('s15')
    net.addLink(s10, h19)
    net.addLink(s10, h20)
    net.addLink(s11, h21)
    net.addLink(s11, h22)
    net.addLink(s11, h23)
    net.addLink(s11, h24)
    net.addLink(s12, h25)
    net.addLink(s12, h26)
    net.addLink(s12, h27)
    net.addLink(s12, h28)
    net.addLink(s13, h29)
    net.addLink(s13, h30)
    net.addLink(s13, h31)
    net.addLink(s13, h32)
    net.addLink(s14, h33)
    net.addLink(s14, h34)
    net.addLink(s14, h35)
    net.addLink(s14, h36)
    net.addLink(s15, h37)
    net.addLink(s15, h38)
    net.addLink(s15, h39)
    net.addLink(s15, h40)
    net.addLink(s16, h41)
    net.addLink(s16, h42)
    net.addLink(s16, h43)
    net.addLink(s16, h44)
    net.addLink(s17, h45)
    net.addLink(s17, h46)
    net.addLink(s17, h47)
    net.addLink(s17, h48)
    net.addLink(s18, h49)
    net.addLink(s18, h50)
    net.addLink(s18, h51)
    net.addLink(s18, h52)
    net.addLink(s19, h53)
    net.addLink(s19, h54)
    net.addLink(s19, h55)
    net.addLink(s19, h56)
    net.addLink(s20, h57)
    net.addLink(s20, h58)
    net.addLink(s20, h59)
    net.addLink(s20, h60)
    net.addLink(s21, h61)
    net.addLink(s21, h62)
    net.addLink(s21, h63)
    net.addLink(s21, h64)
    net.addLink(s2, s1)
    net.addLink(s1, s3)
    net.addLink(s1, s4)
    net.addLink(s1, s5)
    net.addLink(s2, s6)
    net.addLink(s2, s7)
    net.addLink(s2, s8)
    net.addLink(s2, s9)
    net.addLink(s3, s10)
    net.addLink(s3, s11)
    net.addLink(s3, s12)
    net.addLink(s3, s13)
    net.addLink(s4, s14)
    net.addLink(s4, s15)
    net.addLink(s4, s16)
    net.addLink(s4, s17)
    net.addLink(s5, s18)
    net.addLink(s5, s19)
    net.addLink(s5, s20)
    net.addLink(s5, s21)
    net.addLink(s6, h1)
    net.addLink(s6, h2)
    net.addLink(s6, h3)
    net.addLink(s6, h4)
    net.addLink(s7, h5)
    net.addLink(s7, h6)
    net.addLink(s7, h7)
    net.addLink(s7, h8)
    net.addLink(s8, h10)
    net.addLink(s8, h9)
    net.addLink(s8, h11)
    net.addLink(s8, h12)
    net.addLink(s9, h13)
    net.addLink(s9, h14)
    net.addLink(s9, h15)
    net.addLink(s9, h16)
    net.addLink(s10, h17)
    net.addLink(s10, h18)    
    net.start()

    # Configure the GRE tunnel
    s1.cmd('ovs-vsctl add-port s1 s1-gre1 -- set interface s1-gre1 type=gre options:remote_ip='+NODE1_IP)
    s2.cmd('ovs-vsctl add-port s2 s2-gre1 -- set interface s2-gre1 type=gre options:remote_ip='+NODE1_IP)
    s3.cmd('ovs-vsctl add-port s3 s3-gre1 -- set interface s3-gre1 type=gre options:remote_ip='+NODE1_IP)
    s4.cmd('ovs-vsctl add-port s4 s4-gre1 -- set interface s4-gre1 type=gre options:remote_ip='+NODE1_IP)
    s5.cmd('ovs-vsctl add-port s5 s5-gre1 -- set interface s5-gre1 type=gre options:remote_ip='+NODE1_IP)
    s6.cmd('ovs-vsctl add-port s6 s6-gre1 -- set interface s6-gre1 type=gre options:remote_ip='+NODE1_IP)
    s7.cmd('ovs-vsctl add-port s7 s7-gre1 -- set interface s7-gre1 type=gre options:remote_ip='+NODE1_IP)
    s8.cmd('ovs-vsctl add-port s8 s8-gre1 -- set interface s8-gre1 type=gre options:remote_ip='+NODE1_IP)
    s9.cmd('ovs-vsctl add-port s9 s9-gre1 -- set interface s9-gre1 type=gre options:remote_ip='+NODE1_IP)
    s10.cmd('ovs-vsctl add-port s10 s10-gre1 -- set interface s10-gre1 type=gre options:remote_ip='+NODE1_IP)
    s11.cmd('ovs-vsctl add-port s11 s11-gre1 -- set interface s11-gre1 type=gre options:remote_ip='+NODE1_IP)
    s12.cmd('ovs-vsctl add-port s12 s12-gre1 -- set interface s12-gre1 type=gre options:remote_ip='+NODE1_IP)
    s13.cmd('ovs-vsctl add-port s13 s13-gre1 -- set interface s13-gre1 type=gre options:remote_ip='+NODE1_IP)
    s14.cmd('ovs-vsctl add-port s14 s14-gre1 -- set interface s14-gre1 type=gre options:remote_ip='+NODE1_IP)
    s15.cmd('ovs-vsctl add-port s15 s15-gre1 -- set interface s15-gre1 type=gre options:remote_ip='+NODE1_IP)
    s16.cmd('ovs-vsctl add-port s16 s16-gre1 -- set interface s16-gre1 type=gre options:remote_ip='+NODE1_IP)
    s17.cmd('ovs-vsctl add-port s17 s17-gre1 -- set interface s17-gre1 type=gre options:remote_ip='+NODE1_IP)
    s18.cmd('ovs-vsctl add-port s18 s18-gre1 -- set interface s18-gre1 type=gre options:remote_ip='+NODE1_IP)
    s19.cmd('ovs-vsctl add-port s19 s19-gre1 -- set interface s19-gre1 type=gre options:remote_ip='+NODE1_IP)
    s20.cmd('ovs-vsctl add-port s20 s20-gre1 -- set interface s20-gre1 type=gre options:remote_ip='+NODE1_IP)
    s21.cmd('ovs-vsctl add-port s21 s21-gre1 -- set interface s21-gre1 type=gre options:remote_ip='+NODE1_IP)
    s21.cmdPrint('ovs-vsctl show')

    CLI( net )
    net.stop()

if __name__ == '__main__':
    setLogLevel( 'info' )
    emptyNet()
